<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø³Ø¦Ù„Ø©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        body::before {
            content: '';
            position: fixed;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: moveBackground 20s linear infinite;
            z-index: 0;
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
        .score-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-box {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
            transition: transform 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-5px) scale(1.05);
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
        }

        /* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
        .app-title {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-in;
        }

        .app-title h1 {
            font-size: 48px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        .app-title p {
            font-size: 18px;
            opacity: 0.9;
        }

        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ */
        .question-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 24px;
            color: #2d3748;
            margin-bottom: 30px;
            line-height: 1.6;
            font-weight: 500;
        }

        .main-heading {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 12px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .sub-heading {
            color: #4a5568;
            margin-bottom: 8px;
            display: block;
            font-weight: 600;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª */
        .answers-grid {
            display: grid;
            gap: 15px;
        }

        .answer-btn {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border: 3px solid transparent;
            padding: 20px 25px;
            border-radius: 15px;
            font-size: 18px;
            color: #2d3748;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: right;
            position: relative;
            overflow: hidden;
        }

        .answer-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .answer-btn:hover::before {
            width: 400px;
            height: 400px;
        }

        .answer-btn:hover {
            transform: translateX(-5px);
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .answer-btn.correct {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border-color: #2f855a;
            animation: correctPulse 0.5s ease;
        }

        .answer-btn.wrong {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
            border-color: #c53030;
            animation: wrongShake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© */
        .feedback {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            animation: fadeIn 0.5s ease;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .feedback.wrong {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ */
        .next-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 30px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.6);
        }

        .next-btn:active {
            transform: translateY(0);
        }

        /* Ø²Ø± Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙˆØ§Ø¨ (ØµØºÙŠØ± ÙˆÙ„ÙˆÙ† Ù…Ù…ÙŠØ²) */
        .reveal-btn {
            background: linear-gradient(135deg, #6b46c1 0%, #553c9a 100%);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 0;
            display: inline-block;
        }
        .reveal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(85,60,154,0.28);
        }
        .reveal-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        /* Ø²Ø± 'Ù„Ø§ â€” Ø§Ù„ØªØ§Ù„ÙŠ' ØµØºÙŠØ± Ø¨Ø¬Ø§Ù†Ø¨ Ø²Ø± Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙˆØ§Ø¨ */
        .reveal-no {
            padding: 10px 14px;
            border-radius: 20px;
            font-size: 14px;
            margin-left: 10px;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© */
        .final-result {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 25px;
            padding: 50px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            animation: zoomIn 0.6s ease-out;
            display: none;
        }

        .final-result.show {
            display: block;
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-emoji {
            font-size: 100px;
            margin-bottom: 20px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .result-title {
            font-size: 36px;
            color: #2d3748;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .result-score {
            font-size: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
            margin-bottom: 30px;
        }

        .result-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .detail-box {
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
        }

        .detail-label {
            font-size: 14px;
            color: #718096;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 28px;
            font-weight: bold;
            color: #2d3748;
        }

        .restart-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 60px;
            border-radius: 30px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.6);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            height: 8px;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª */
        .particle {
            position: fixed;
            pointer-events: none;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .app-title h1 {
                font-size: 32px;
            }

            .question-card {
                padding: 25px;
            }

            .question-text {
                font-size: 20px;
            }

            .answer-btn {
                font-size: 16px;
                padding: 15px 20px;
            }

            .result-details {
                grid-template-columns: 1fr;
            }

            .stat-box {
                padding: 12px;
            }

            .score-panel {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ØµÙ†Ø¯ÙˆÙ‚ Ù…Ø®ØµØµ Ù„Ù†ØªÙŠØ¬Ø© ØµØ­/Ø®Ø·Ø£ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© */
        .tf-box {
            margin-top: 12px;
            padding: 12px;
            border-radius: 10px;
            font-size: 18px;
            color: #2d3748;
            background: rgba(247,250,252,0.8);
            display: none;
            text-align: center;
        }

        .resume-banner {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(6px);
            padding: 12px 16px;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
            margin-bottom: 18px;
        }

        .resume-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 8px 14px;
            border-radius: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="resumeBanner" class="resume-banner" style="display:none;">
            <div id="resumeText">ØªÙ… Ø­ÙØ¸ ØªÙ‚Ø¯Ù… Ø³Ø§Ø¨Ù‚. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØ¦Ù†Ø§Ù Ø­ÙŠØ« ØªÙˆÙ‚ÙØªØŸ</div>
            <button id="resumeBtn" class="resume-btn">Ø§Ø³ØªØ¦Ù†Ø§Ù</button>
            <button id="clearBtn" class="resume-btn" style="background:#e53e3e">Ø­Ø°Ù ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>
        </div>
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¹Ù„ÙˆÙŠØ© -->
        <div class="score-panel">
            <div class="stat-box">
                <div class="stat-label">Ø§Ù„Ø³Ø¤Ø§Ù„</div>
                <div class="stat-value" id="questionNumber">0/0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Ø§Ù„Ù†ØªÙŠØ¬Ø©</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©</div>
                <div class="stat-value" id="correct">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø©</div>
                <div class="stat-value" id="wrong">0</div>
            </div>
        </div>

        <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
        <div class="app-title">
            <h1>ğŸ¯ Ù…Ù„Ø®Øµ Ø§Ø³Ø¦Ù„Ø©</h1>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ -->
        <div class="question-card" id="questionCard">
            <span class="question-number" id="questionLabel">Ø§Ù„Ø³Ø¤Ø§Ù„ 1</span>
            <div class="main-heading" id="mainHeading" style="display:none;"></div>
            <div class="sub-heading" id="subHeading" style="display:none;"></div>
            <div class="question-text" id="questionText"></div>
            <div class="answers-grid" id="answersGrid"></div>
            <div style="margin-top:15px; text-align: center;">
                <div id="revealPrompt" style="display:none;">
                    <button class="reveal-btn" id="revealYes">ğŸ” Ø£Ø¸Ù‡Ø± Ø§Ù„ØµÙˆØ§Ø¨</button>
                    <button class="next-btn reveal-no" id="revealNo">Ù„Ø§ â€” Ø§Ù„ØªØ§Ù„ÙŠ</button>
                </div>
            </div>
            <div id="tfAnswerBox" class="tf-box" aria-live="polite"></div>
            <div class="feedback" id="feedback"></div>
        </div>

        <!-- Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ -->
        <button class="next-btn" id="nextBtn" style="display: none;">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â†</button>

        <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© -->
        <div class="final-result" id="finalResult">
            <div class="result-emoji" id="resultEmoji">ğŸ‰</div>
            <div class="result-title" id="resultTitle">ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!</div>
            <div class="result-score" id="finalScore">0/0</div>
            <div class="result-details">
                <div class="detail-box">
                    <div class="detail-label">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</div>
                    <div class="detail-value" id="percentage">0%</div>
                </div>
                <div class="detail-box">
                    <div class="detail-label">Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©</div>
                    <div class="detail-value" id="finalCorrect">0</div>
                </div>
                <div class="detail-box">
                    <div class="detail-label">Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©</div>
                    <div class="detail-value" id="finalWrong">0</div>
                </div>
            </div>
            <button class="restart-btn" onclick="restartQuiz()">ğŸ”„ Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯</button>
        </div>
    </div>









    
    <script>
        // ============ Ø£Ø¶Ù Ø£Ø³Ø¦Ù„ØªÙƒ Ù‡Ù†Ø§ ============
      
        // ============ Ø£Ø¶Ù Ø£Ø³Ø¦Ù„ØªÙƒ Ù‡Ù†Ø§ ============
      
        // ============ Ø£Ø¶Ù Ø£Ø³Ø¦Ù„ØªÙƒ Ù‡Ù†Ø§ ============
      










































        // ============ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ============
        let currentQuestion = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let answered = false;

        // ============ Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ ============
        function displayQuestion() {
            answered = false;
            const question = questions[currentQuestion];

            document.getElementById('questionLabel').textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuestion + 1}`;
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¥Ø°Ø§ ÙˆÙØ¬Ø¯Øª
            const mainEl = document.getElementById('mainHeading');
            const subEl = document.getElementById('subHeading');
            if (question.mainHeading) { mainEl.textContent = question.mainHeading; mainEl.style.display = 'block'; } else { mainEl.style.display = 'none'; }
            if (question.subHeading) { subEl.textContent = question.subHeading; subEl.style.display = 'block'; } else { subEl.style.display = 'none'; }

            document.getElementById('questionText').textContent = question.question;
            document.getElementById('questionNumber').textContent = `${currentQuestion + 1}/${questions.length}`;

            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            const progress = ((currentQuestion) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ ÙˆØ§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø©
            document.getElementById('nextBtn').style.display = 'none';
            const feedbackEl = document.getElementById('feedback');
            feedbackEl.classList.remove('show', 'correct', 'wrong');
            feedbackEl.textContent = '';
            const revealPrompt = document.getElementById('revealPrompt');
            if (revealPrompt) { revealPrompt.style.display = 'none'; }
            const revealYes = document.getElementById('revealYes');
            if (revealYes) revealYes.disabled = false; // ensure enabled for next use

            // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª - Ù…Ø³Ø­ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙŠØ¯Ø©
            const answersGrid = document.getElementById('answersGrid');
            answersGrid.innerHTML = '';

            // Ø¯Ø¹Ù… Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
            const qType = question.type || 'mc';

            if (qType === 'tf') {
                // Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø±ÙŠÙ†: ØµØ­ Ùˆ Ø®Ø·Ø£
                const trueBtn = document.createElement('button');
                trueBtn.className = 'answer-btn';
                trueBtn.id = `${question.id}_true`;
                trueBtn.textContent = 'ØµØ­';
                trueBtn.onclick = () => checkAnswerTF(true);

                const falseBtn = document.createElement('button');
                falseBtn.className = 'answer-btn';
                falseBtn.id = `${question.id}_false`;
                falseBtn.textContent = 'Ø®Ø·Ø£';
                falseBtn.onclick = () => checkAnswerTF(false);

                answersGrid.appendChild(trueBtn);
                answersGrid.appendChild(falseBtn);
            } else {
                // Ø£Ø³Ø¦Ù„Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© (Ø£Ùˆ Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©)
                (question.answers || []).forEach((answer, index) => {
                    const button = document.createElement('button');
                    button.className = 'answer-btn';
                    button.id = `${question.id}_ans${index + 1}`;
                    button.textContent = answer;
                    button.onclick = () => checkAnswer(index);
                    answersGrid.appendChild(button);
                });
            }
        }

        // ============ ÙØ­Øµ Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­/Ø®Ø·Ø£ ============
        function checkAnswerTF(selectedBool) {
            if (answered) return;
            answered = true;

            const question = questions[currentQuestion];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('feedback');

            // ØªØ¹Ø·ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            buttons.forEach(btn => btn.disabled = true);

            const isCorrect = question.correctTF === selectedBool;

            if (isCorrect) {
                correctAnswers++;
                const selectedBtn = document.getElementById(`${question.id}_${selectedBool ? 'true' : 'false'}`);
                if (selectedBtn) selectedBtn.classList.add('correct');
                feedback.textContent = 'âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø±Ø§Ø¦Ø¹!';
                feedback.className = 'feedback correct show';
                createConfetti();
            } else {
                wrongAnswers++;
                const selectedBtn = document.getElementById(`${question.id}_${selectedBool ? 'true' : 'false'}`);
                const correctBtn = document.getElementById(`${question.id}_${question.correctTF ? 'true' : 'false'}`);
                if (selectedBtn) selectedBtn.classList.add('wrong');
                if (correctBtn) correctBtn.classList.add('correct');

                let correctText = question.correctTF ? 'ØµØ­' : 'Ø®Ø·Ø£';
                let extra = '';
                if (!question.correctTF && question.correction) {
                    extra = ' â€” Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„ØµØ­ÙŠØ­Ø©: ' + question.correction;
                }

                feedback.textContent = 'âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: ' + correctText + (extra ? extra : '');
                feedback.className = 'feedback wrong show';
            }

            // --- Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„Ù†Øµ Ù‡ÙŠ "Ø®Ø·Ø£" (Ø£ÙŠ Ø£Ù† Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø®Ø§Ø·Ø¦Ø©) Ù†Ø¹Ø±Ø¶ Ù…Ø±Ø¨Ø¹ "Ø£Ø¸Ù‡Ø± Ø§Ù„ØµÙˆØ§Ø¨" Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©ØŒ Ø¨ØºØ¶ Ø§Ù„Ù†Ø¸Ø± Ø¹Ù† ØµØ­Ø©/Ø®Ø·Ø£ Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            if (question.type === 'tf' && question.correctTF === false) {
                const revealPrompt = document.getElementById('revealPrompt');
                if (revealPrompt) {
                    revealPrompt.style.display = 'block';
                    const yes = document.getElementById('revealYes');
                    const no = document.getElementById('revealNo');
                    if (yes) {
                        yes.disabled = false;
                        yes.onclick = () => { showCorrectAnswer(); };
                    }
                    if (no) {
                        no.disabled = false;
                        no.onclick = () => { nextQuestion(); };
                    }
                }
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            updateStats();

            // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ø£Ùˆ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            if (currentQuestion < questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'block';
            } else {
                setTimeout(showFinalResult, 1500);
            }
        }

        // ============ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙˆØ§Ø¨ / Ø§Ù„ØªÙØ³ÙŠØ± Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ============
        function showCorrectAnswer() {
            const question = questions[currentQuestion];
            const qType = question.type || 'mc';
            const feedback = document.getElementById('feedback');

            if (qType === 'mc') {
                const correctIndex = question.correctAnswer;
                const btn = document.getElementById(`${question.id}_ans${correctIndex + 1}`);
                if (btn) btn.classList.add('correct');
                feedback.textContent = 'Ø§Ù„ØµÙˆØ§Ø¨: ' + (question.answers ? question.answers[correctIndex] : '');
                // append explanation if present
                if (question.explanation) feedback.textContent += ' â€” Ø§Ù„ØªÙØ³ÙŠØ±: ' + question.explanation;
                feedback.className = 'feedback correct show';
            } else if (qType === 'tf') {
                const correctBtn = document.getElementById(`${question.id}_${question.correctTF ? 'true' : 'false'}`);
                if (correctBtn) correctBtn.classList.add('correct');
                let text = 'Ø§Ù„ØµÙˆØ§Ø¨: ' + (question.correctTF ? 'ØµØ­' : 'Ø®Ø·Ø£');
                if (!question.correctTF && question.correction) {
                    text += ' â€” Ø§Ù„ØµÙŠØ§ØºØ© Ø§Ù„ØµØ­ÙŠØ­Ø©: ' + question.correction;
                }
                // append explanation if present
                if (question.explanation) text += ' â€” Ø§Ù„ØªÙØ³ÙŠØ±: ' + question.explanation;
                feedback.textContent = text;
                feedback.className = 'feedback correct show';
            }

            const revealBtn = document.getElementById('revealBtn');
            if (revealBtn) revealBtn.disabled = true;
        }

        // ============ ÙØ­Øµ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ============
        function checkAnswer(selectedIndex) {
            if (answered) return;
            answered = true;
            
            const question = questions[currentQuestion];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('feedback');
            
            // ØªØ¹Ø·ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            buttons.forEach(btn => btn.disabled = true);
            
            if (selectedIndex === question.correctAnswer) {
                // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                correctAnswers++;
                buttons[selectedIndex].classList.add('correct');
                feedback.textContent = 'âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø±Ø§Ø¦Ø¹!';
                feedback.className = 'feedback correct show';
                createConfetti();
            } else {
                // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
                wrongAnswers++;
                buttons[selectedIndex].classList.add('wrong');
                buttons[question.correctAnswer].classList.add('correct');
                feedback.textContent = 'âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: ' + question.answers[question.correctAnswer];
                feedback.className = 'feedback wrong show';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            updateStats();
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ø£Ùˆ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            if (currentQuestion < questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'block';
            } else {
                setTimeout(showFinalResult, 1500);
            }
        }

        // ============ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ ============
        function nextQuestion() {
            currentQuestion++;
            displayQuestion();
        }

        // ============ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ============
        function updateStats() {
            document.getElementById('score').textContent = correctAnswers;
            document.getElementById('correct').textContent = correctAnswers;
            document.getElementById('wrong').textContent = wrongAnswers;
        }

        // ============ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ============
        function showFinalResult() {
            document.getElementById('questionCard').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            
            const finalResult = document.getElementById('finalResult');
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            
            document.getElementById('finalScore').textContent = `${correctAnswers}/${questions.length}`;
            document.getElementById('percentage').textContent = percentage + '%';
            document.getElementById('finalCorrect').textContent = correctAnswers;
            document.getElementById('finalWrong').textContent = wrongAnswers;
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ù„Ø±Ù…Ø² Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            if (percentage >= 90) {
                document.getElementById('resultEmoji').textContent = 'ğŸ†';
                document.getElementById('resultTitle').textContent = 'Ù…Ù…ØªØ§Ø²! Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹!';
            } else if (percentage >= 70) {
                document.getElementById('resultEmoji').textContent = 'ğŸ‰';
                document.getElementById('resultTitle').textContent = 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ø§Ø³ØªÙ…Ø±!';
            } else if (percentage >= 50) {
                document.getElementById('resultEmoji').textContent = 'ğŸ‘';
                document.getElementById('resultTitle').textContent = 'Ø¬ÙŠØ¯! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø³Ù†!';
            } else {
                document.getElementById('resultEmoji').textContent = 'ğŸ’ª';
                document.getElementById('resultTitle').textContent = 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰!';
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø¥Ù„Ù‰ 100%
            document.getElementById('progressBar').style.width = '100%';
            
            finalResult.classList.add('show');
        }

        // ============ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ============
        function restartQuiz() {
            currentQuestion = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            
            document.getElementById('questionCard').style.display = 'block';
            document.getElementById('finalResult').classList.remove('show');
            
            updateStats();
            displayQuestion();
        }

        // ============ ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ ============
        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#48bb78', '#f56565', '#ecc94b'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'particle';
                    confetti.style.cssText = `
                        left: ${Math.random() * 100}%;
                        top: ${Math.random() * 100}%;
                        width: ${Math.random() * 10 + 5}px;
                        height: ${Math.random() * 10 + 5}px;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        border-radius: 50%;
                    `;
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        // ============ Ø±Ø¨Ø· Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ ============
        document.getElementById('nextBtn').addEventListener('click', nextQuestion);

        // ============ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ============
        displayQuestion();
    </script>
</body>
</html>